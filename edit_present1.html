<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>giffunding</title>
        <link rel="stylesheet" as="style" href="css/edit.css">
    </head>
    <body>
        <!-- 선물 그리는 네번째 화면 -->
        <div class="top_progress_bar">
            <table>
                <tr>
                    <td style="width: 42%;"></td>
                    <td style="width: 1%; background-color: #fff2df;"></td>
                    <td style="width: 42%; background-color: #f6dcdc;"></td>
                </tr>
            </table>
        </div>
        <div class="draw_explain">
            선물을 그려주세요!
        </div>
        <div class="user_input">
            <div id="input_picture">
                <!-- <input type="text" placeholder="예시" id="picture"> -->
                <canvas id="myCanvas"></canvas>
            </div>
            <div id="present_title">
                <b>선물 이름</b>
            </div>
            <div id="input_name">
                <input type="text" placeholder="(0/8)">
            </div>
            <div id="price">
                <b>가격</b>
            </div>
            <div id="input_price">
                <input type="text" placeholder="원">
            </div>
            <div id="information">
                <b>펀딩에 참여하는 친구는<br>
                한 사람당 가상의 돈 10만원이 주어집니다.</b>
            </div>
        </div>
        <div class="page_move">
            <button id="back">이전</button>
            <button id="next">다음</button>
        </div>
        <script>
            // var canvas = document.getElementById('myCanvas');
            // var context = canvas.getContext('2d');
            // var isDrawing = false;
            // var lastX = 0;
            // var lastY = 0;
        
            // canvas.addEventListener('mousedown', startDrawing);
            // canvas.addEventListener('mousemove', draw);
            // canvas.addEventListener('mouseup', stopDrawing);
            // canvas.addEventListener('mouseout', stopDrawing);
        
            // function startDrawing(event) {
            //   isDrawing = true;
            //   [lastX, lastY] = [event.offsetX, event.offsetY];
            // }
        
            // function draw(event) {
            //   if (!isDrawing) return;
            //   context.beginPath();
            //   context.moveTo(lastX, lastY);
            //   context.lineTo(event.offsetX, event.offsetY);
            //   context.stroke();
            //   [lastX, lastY] = [event.offsetX, event.offsetY];
            // }
        
            // function stopDrawing() {
            //   isDrawing = false;
            // }
            let painting = false;
            let lastX = 0;
            let lastY = 0;

            function startTouching() {
                painting=true;

                var touch = event.touches[0]; // 첫 번째 터치 이벤트만 사용

                // 뷰포트 크기와 캔버스의 실제 픽셀 크기 비율 계산
                var scale = canvas.width / canvas.offsetWidth;

                // 터치한 좌표를 캔버스 좌표로 변환
                var rect = canvas.getBoundingClientRect();
                lastX = (touch.clientX - rect.left) * scale;
                lastY = (touch.clientY - rect.top) * scale;
            }

            function stopTouching(event) {
                painting=false;
            }

            function onTouchMove(event) {
                if (!painting) return;

                var touch = event.touches[0]; // 첫 번째 터치 이벤트만 사용

                // 뷰포트 크기와 캔버스의 실제 픽셀 크기 비율 계산
                var scale = canvas.width / canvas.offsetWidth;

                // 터치한 좌표를 캔버스 좌표로 변환
                var rect = canvas.getBoundingClientRect();
                var x = (touch.clientX - rect.left) * scale;
                var y = (touch.clientY - rect.top) * scale;

                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(x, y);
                ctx.stroke();

                lastX = x;
                lastY = y;
            }
        </script>
        <!-- <footer></footer> -->
    </body>
</html>